# üçé Build iOS Completo - Passo a Passo Detalhado

**Data:** 21 de Outubro de 2025  
**Vers√£o:** 1.2.0  
**Status:** ‚úÖ Pronto para Build

---

## üìã √çNDICE

1. [Verifica√ß√£o Pr√©via](#verifica√ß√£o-pr√©via)
2. [Op√ß√£o A: Build R√°pido via Terminal](#op√ß√£o-a-build-r√°pido)
3. [Op√ß√£o B: Build via Xcode (GUI)](#op√ß√£o-b-xcode-gui)
4. [Configura√ß√µes de Signing](#configura√ß√µes-de-signing)
5. [Troubleshooting](#troubleshooting)
6. [Pr√≥ximos Passos](#pr√≥ximos-passos)

---

## ‚úÖ Verifica√ß√£o Pr√©via

Antes de qualquer coisa, execute:

```bash
# Abra terminal e v√° para a pasta do projeto
cd /Applications/Ailun-Sa-de-1

# Verifique se tudo est√° em ordem
echo "=== CHECKLIST PR√â-BUILD ==="
echo ""
echo "1. iOS Project:"
test -d ios && echo "‚úÖ ios/ existe" || echo "‚ùå ios/ N√ÉO encontrado"
test -f ios/AilunSade.xcworkspace && echo "‚úÖ xcworkspace existe" || echo "‚ùå xcworkspace N√ÉO encontrado"
test -f ios/Podfile && echo "‚úÖ Podfile existe" || echo "‚ùå Podfile N√ÉO encontrado"
test -f ios/Podfile.lock && echo "‚úÖ Podfile.lock existe" || echo "‚ùå Podfile.lock N√ÉO encontrado"
echo ""
echo "2. Ferramentas:"
which xcodebuild > /dev/null && echo "‚úÖ xcodebuild dispon√≠vel" || echo "‚ùå xcodebuild N√ÉO encontrado"
which pod > /dev/null && echo "‚úÖ CocoaPods dispon√≠vel" || echo "‚ùå CocoaPods N√ÉO encontrado"
echo ""
echo "3. Verificar Podfile.lock sincronizado:"
pod install --repo-update --dry-run 2>&1 | grep -q "Analyzing dependencies" && echo "‚úÖ Pods sincronizados" || echo "‚ö†Ô∏è Pode precisar pod install"
```

**Esperado:** Todos com ‚úÖ

---

## Op√ß√£o A: Build R√°pido via Terminal

### ‚ö° M√©todo Mais R√°pido (3-5 minutos)

```bash
cd /Applications/Ailun-Sa-de-1/ios

# Executar script de build
./build.sh
```

**Resultado:**
```
...
Build complete! 
Output: build/Release-iphoneos/AilunSade.app
‚úÖ SUCCESS
```

### Se build.sh n√£o tiver permiss√£o:

```bash
chmod +x /Applications/Ailun-Sa-de-1/ios/build.sh
./build.sh
```

### Build Manual via xcodebuild:

#### Para Simulador (mais r√°pido):
```bash
cd /Applications/Ailun-Sa-de-1

xcodebuild \
  -workspace ios/AilunSade.xcworkspace \
  -scheme AilunSade \
  -configuration Debug \
  -sdk iphonesimulator \
  -derivedDataPath ios/build \
  build
```

#### Para Dispositivo F√≠sico:
```bash
cd /Applications/Ailun-Sa-de-1

xcodebuild \
  -workspace ios/AilunSade.xcworkspace \
  -scheme AilunSade \
  -configuration Release \
  -sdk iphoneos \
  -derivedDataPath ios/build \
  build
```

#### Para App Store (Archive):
```bash
cd /Applications/Ailun-Sa-de-1

xcodebuild \
  -workspace ios/AilunSade.xcworkspace \
  -scheme AilunSade \
  -configuration Release \
  -scheme AilunSade \
  archive \
  -archivePath ios/build/AilunSade.xcarchive
```

---

## Op√ß√£o B: Xcode GUI (Mais Visual)

### üìñ Passo 1: Abrir Xcode

```bash
open /Applications/Ailun-Sa-de-1/ios/AilunSade.xcworkspace
```

**‚ö†Ô∏è IMPORTANTE:** Abra `.xcworkspace`, N√ÉO `.xcodeproj`

Voc√™ ver√° a janela do Xcode com:
- Left panel: Project navigator
- Center: Editor
- Right panel: Inspectors

### üìñ Passo 2: Selecionar Scheme e Device

Na barra de ferramentas superior:

```
[AilunSade ‚ñº]  [iPhone 16 Pro Simulator ‚ñº]  [‚ñ∂ Build & Run]
```

#### 2a. Selecionar Scheme (primeiro dropdown)
- Clique em `AilunSade`
- Se n√£o aparecer, verifique se est√° no workspace

#### 2b. Selecionar Device/Simulator (segundo dropdown)

**Para Simulador:**
- Clique no dropdown
- Selecione: `iPhone 16 Pro` ou qualquer iPhone dispon√≠vel

**Para Dispositivo F√≠sico:**
- Conecte seu iPhone via USB
- Clique no dropdown
- Selecione: Seu iPhone (aparecer√° com o nome)

### üìñ Passo 3: Configurar Code Signing (IMPORTANTE)

Se for usar dispositivo f√≠sico:

1. **Na left panel:** Clique em "AilunSade" (projeto)
2. **Na center panel:** Selecione "AilunSade" (target)
3. **Na top tabs:** Clique em "Signing & Capabilities"
4. **Configure:**
   - [ ] Team: Selecione sua Apple Developer Team
   - [ ] Bundle ID: `com.ailun.saude`
   - [ ] Provisioning Profile: Deixe "Automatic"

Resultado esperado: Todos os campos em verde ‚úÖ

### üìñ Passo 4: Fazer Build

#### Op√ß√£o 4a: Build Apenas (sem run)
```
Product ‚Üí Build
```
Ou pressione: **‚åòB**

**Status:**
- Barra de progresso aparecer√° na top
- Build Log no painel inferior
- Verde quando completo: ‚úÖ

#### Op√ß√£o 4b: Build + Run (vai abrir app)
```
Product ‚Üí Run
```
Ou pressione: **‚åòR**

**O que acontece:**
1. Build completa
2. App √© instalado
3. App abre automaticamente no simulador/device

### üìñ Passo 5: Monitorar Progresso

**Na janela do Xcode:**

1. **Build Log** (painel inferior):
   - Mostra cada etapa de compila√ß√£o
   - Procure por "Build successful" ou "Build failed"

2. **Issues** (Report Navigator):
   - Se houver erros, aparecem em vermelho
   - Warnings em amarelo

3. **Activity Viewer** (no topo):
   - Barra de progresso
   - Status: "Building", "Installing", "Running"

### üìñ Passo 6: Sucesso!

Quando build termina:

**No Simulador:**
- Simulador abre automaticamente
- App instala e inicia
- Voc√™ v√™ a tela de login/splash

**No Dispositivo:**
- App instala no seu iPhone
- App abre automaticamente
- Icone aparece na home screen

---

## üîí Configura√ß√µes de Signing

### Se Receber Erro: "No provisioning profile found"

#### Solu√ß√£o 1: Configurar Apple ID no Xcode

```
Xcode ‚Üí Preferences ‚Üí Accounts
```

1. Clique em "+"
2. Selecione "Apple ID"
3. Clique "Continue"
4. Entre com sua Apple ID e senha
5. Clique "Next"

#### Solu√ß√£o 2: Selecionar Team no Projeto

```
Project ‚Üí AilunSade ‚Üí Signing & Capabilities
```

1. Na se√ß√£o "Signing", selecione seu Team
2. Xcode criar√° provisioning profile automaticamente
3. Deve aparecer em verde ‚úÖ

#### Solu√ß√£o 3: Manual Provisioning Profile

Se autom√°tico n√£o funcionar:

```
Project ‚Üí Build Settings
```

Procure por:
- `PROVISIONING_PROFILE`
- `PROVISIONING_PROFILE_SPECIFIER`
- `DEVELOPMENT_TEAM`

Configure com seus valores do Apple Developer Account

---

## üöÄ Build Strategies

### Strategy 1: Desenvolvimento R√°pido
```bash
xcodebuild \
  -workspace ios/AilunSade.xcworkspace \
  -scheme AilunSade \
  -configuration Debug \
  -sdk iphonesimulator
```
- **Tempo:** 2-3 minutos
- **Uso:** Testes r√°pidos
- **Device:** Simulador apenas

### Strategy 2: Teste em Device
```bash
xcodebuild \
  -workspace ios/AilunSade.xcworkspace \
  -scheme AilunSade \
  -configuration Debug \
  -sdk iphoneos
```
- **Tempo:** 3-5 minutos
- **Uso:** Testes em device real
- **Device:** iPhone conectado

### Strategy 3: Produ√ß√£o/App Store
```bash
xcodebuild \
  -workspace ios/AilunSade.xcworkspace \
  -scheme AilunSade \
  -configuration Release \
  -sdk iphoneos \
  archive \
  -archivePath build/AilunSade.xcarchive
```
- **Tempo:** 5-10 minutos
- **Uso:** Submiss√£o App Store
- **Output:** `.xcarchive` para distribui√ß√£o

---

## ‚ùå Troubleshooting

### Problema 1: "Build failed with CocoaPods error"

```bash
cd /Applications/Ailun-Sa-de-1/ios

# Op√ß√£o 1: Reinstalar Pods
rm -rf Pods Podfile.lock
pod install --repo-update

# Op√ß√£o 2: Update CocoaPods
pod repo update
pod install

# Depois tente build novamente
```

### Problema 2: "Command PhaseScriptExecution failed"

```bash
cd /Applications/Ailun-Sa-de-1

# Limpar build
rm -rf ios/build
rm -rf ~/Library/Developer/Xcode/DerivedData/*

# Tente novamente
xcodebuild clean -workspace ios/AilunSade.xcworkspace
xcodebuild -workspace ios/AilunSade.xcworkspace \
  -scheme AilunSade \
  -configuration Debug \
  build
```

### Problema 3: "Xcode says development team is required"

```
Project ‚Üí AilunSade ‚Üí Signing & Capabilities
```

Na se√ß√£o Signing:
- [ ] Selecione seu Team no dropdown
- [ ] Bundle ID deve ser: com.ailun.saude
- [ ] Clique em "Copy Provisioning Profile"

### Problema 4: "Simulator device not found"

```bash
# Listar simuladores
xcrun simctl list devices

# Criar novo se n√£o houver
xcrun simctl create "iPhone 16 Pro" \
  com.apple.CoreSimulator.SimDeviceType.iPhone-16-Pro \
  com.apple.CoreSimulator.SimRuntime.iOS-18-0

# Ou abrir Simulator app
open /Applications/Simulator.app
```

### Problema 5: "Build muito lento"

**Solu√ß√µes:**
1. Use device f√≠sico em vez de simulador
2. Feche outros apps
3. Limpe build cache: `rm -rf ~/Library/Developer/Xcode/DerivedData/*`
4. Use SSD em vez de HDD
5. Considere usar EAS build (cloud) se problema persistir

---

## üì± Testar o App

Depois que build completa com sucesso:

### Testes B√°sicos
- [ ] App inicia sem crash
- [ ] Tela de splash aparece
- [ ] Login screen carrega
- [ ] Tente fazer login com credenciais de teste
- [ ] Dashboard carrega dados
- [ ] Bot√µes respondem a cliques

### Testes de Network
- [ ] App conecta ao Supabase
- [ ] API calls funcionam
- [ ] Dados aparecem corretamente

### Testes de Funcionalidade
- [ ] Agendamento de consultas
- [ ] Videochamada (ou simula√ß√£o)
- [ ] Hist√≥rico de consultas
- [ ] Perfil de usu√°rio

---

## üì¶ Exportar para App Store

Depois do build funcionar localmente:

### Passo 1: Fazer Archive

```bash
xcodebuild -workspace ios/AilunSade.xcworkspace \
  -scheme AilunSade \
  -configuration Release \
  archive \
  -archivePath ~/AilunSade.xcarchive
```

Ou via Xcode:
```
Product ‚Üí Archive
```

### Passo 2: Exportar IPA

```bash
xcodebuild -exportArchive \
  -archivePath ~/AilunSade.xcarchive \
  -exportOptionsPlist ExportOptions.plist \
  -exportPath ~/AilunSade.ipa
```

Ou via Xcode:
```
Window ‚Üí Organizer
Selecione seu archive
Clique "Distribute App"
```

### Passo 3: Submeter App Store Connect

(Requer Apple Developer Account ativo)

```
https://appstoreconnect.apple.com
```

---

## üìä Arquivos Importantes

```
/Applications/Ailun-Sa-de-1/
‚îú‚îÄ‚îÄ ios/
‚îÇ   ‚îú‚îÄ‚îÄ AilunSade.xcworkspace/     ‚Üê Abra ESTE
‚îÇ   ‚îú‚îÄ‚îÄ AilunSade.xcodeproj/       ‚Üê N√£o use direto
‚îÇ   ‚îú‚îÄ‚îÄ AilunSade/                 ‚Üê Source code
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AilunSade.swift
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îú‚îÄ‚îÄ Pods/                      ‚Üê Depend√™ncias
‚îÇ   ‚îú‚îÄ‚îÄ Podfile                    ‚Üê Define depend√™ncias
‚îÇ   ‚îú‚îÄ‚îÄ Podfile.lock               ‚Üê Lock de vers√µes
‚îÇ   ‚îú‚îÄ‚îÄ build.sh                   ‚Üê Script de build
‚îÇ   ‚îî‚îÄ‚îÄ build/                     ‚Üê Output do build
‚îú‚îÄ‚îÄ app.json                       ‚Üê Configura√ß√£o Expo
‚îî‚îÄ‚îÄ package.json
```

---

## ‚ú® Status

**Projeto:** Ailun Sa√∫de v1.2.0  
**iOS Target:** iOS 13.0+  
**Architecture:** arm64 (device) + x86_64 (simulator)  
**Status:** ‚úÖ Pronto para Build

---

## üéØ Pr√≥ximos Passos

1. ‚úÖ Execute um dos m√©todos acima
2. ‚úÖ Verifique se build completa sem erros
3. ‚úÖ Teste o app no simulador/device
4. ‚úÖ Se funcionar: Parab√©ns! üéâ
5. ‚è≥ Se houver erros: Veja se√ß√£o Troubleshooting

---

## üí° Dicas Profissionais

- **Sempre use `.xcworkspace`**, nunca `.xcodeproj` diretamente
- **Mantenha Podfile.lock em git** para consist√™ncia
- **Use `pod install --repo-update`** regularmente
- **Limpe build cache** se tiver comportamentos estranhos
- **Considere EAS** para CI/CD e builds na nuvem

---

**Pronto para come√ßar? Execute agora:**

```bash
cd /Applications/Ailun-Sa-de-1/ios
./build.sh
```

Ou abra Xcode:

```bash
open /Applications/Ailun-Sa-de-1/ios/AilunSade.xcworkspace
```

**Boa sorte! üöÄ**
